<?php
class Table_HistoryLogEntry extends Omeka_Db_Table
{
    public function getEntries($params,$start,$end) {
        
        if(empty($params['itemID']))
            return;

        $sql = "SELECT id,title,itemID,collectionID,userID,type,value,time FROM `{$dB->HistoryLogEntry}` ".'WHERE itemID LIKE "'.$params['itemID'];
        unset($params['itemID']);
        foreach( $params as $column => $value) {
            $sql .= ' AND ' . $column . ' LIKE "' . $value . '"';
        }
        if(isset($timeStart))
            $sql .= ' AND time > "'.$timeStart.'"';
        if(isset($timeEnd))
            $sql .= ' AND time < "'.$timeEnd.'"';
        $sql .= ' ORDER BY id DESC;';
        return($this->fetchObjects($sql));
        
    }

}